{"version":3,"sources":["webpack:///webpack/bootstrap 28aa9d84d0bf294f547b","webpack:///./src/index.js","webpack:///./src/app.js","webpack:///./src/bus.js","webpack:///(webpack)/node_modules/events/events.js","webpack:///./src/rendererGL.js","webpack:///./node_modules/zenscroll/zenscroll.js"],"names":["init","window","app","onload","App","activeCamera","arCamera","arView","container","currentMode","deviceType","ENTER_EXIT_TRANSITION_DURATION","hemisphereLight","LIGHTING_INTENSITY_FOR_AR","LIGHTING_INTENSITY_FOR_MOBILE_AND_DESKTOP","model","orbitControls","PERSP_CAMERA_FOV","PERSP_CAMERA_ISO_TARGET","THREE","Vector3","perspCamera","render","bind","scrollOffset","scrollTarget","viewer","viewerOffsetFromTop","viewerPlaceholder","vrControls","vrDisplay","vrFrameData","dracoDecoderType","type","dracoLoader","DRACOLoader","ARUtils","getARDisplay","then","display","createScene","isARDevice","setDeviceType","createArCameras","isMobileDevice","createMobileCamera","createDesktopCamera","createModel","createLights","setActiveCamera","document","querySelector","splash","scene","Scene","rendererGL","renderer","domElement","addEventListener","onCanvasClick","enterButton","enter","exitButton","exit","onTouchMove","e","passive","console","log","orientation","navigator","userAgent","indexOf","element","classList","add","remove","w","getComputedStyle","getPropertyValue","split","h","width","height","cam","duration","TWEEN","Tween","placeholder","to","onUpdate","updateSize","aspect","getContainerSize","updateProjectionMatrix","start","VRFrameData","ARPerspectiveCamera","innerWidth","innerHeight","depthNear","depthFar","PerspectiveCamera","position","set","lookAt","updateCameraAndCanvas","VRControls","ARView","reticle","ARPrimitives","ARSpotlight","OrbitControls","autoRotate","autoRotateSpeed","target","enableZoom","minPolarAngle","maxPolarAngle","Math","PI","style","cursor","loadingManager","LoadingManager","loader","ColladaLoader","load","collada","createGrid","traverse","node","material","side","DoubleSide","wheels_left","getObjectByName","z","easing","Easing","Quadratic","Out","HemisphereLight","GRID_SIZE","GRID_DIVISIONS","MEDIUM","grid","GridHelper","environments","Environments","visible","enterAR","enterFullscreen","exitAR","exitFullscreen","getBoundingClientRect","top","scrollY","createElement","id","padding","boxSizing","parentElement","insertBefore","documentElement","overflowY","transition","animate","String","removeAttribute","viewerCurrentPosition","hideModel","intensity","showModel","hitTest","hits","length","hit","placeObjectAtHit","preventDefault","cb","requestAnimationFrame","update","updateMatrix","clearDepth","getFrameData","projMat","leftProjectionMatrix","fov","atan","RAD2DEG","pos","onComplete","InOut","quat","quaternion","EventEmitter","require","_events","_maxListeners","undefined","module","exports","prototype","defaultMaxListeners","setMaxListeners","n","isNumber","isNaN","TypeError","emit","er","handler","len","args","i","listeners","error","isObject","arguments","Error","err","context","isUndefined","isFunction","call","Array","slice","apply","addListener","listener","m","newListener","push","warned","trace","on","once","fired","g","removeListener","list","splice","removeAllListeners","key","ret","listenerCount","evlistener","emitter","arg","RendererGL","WebGLRenderer","alpha","setPixelRatio","devicePixelRatio","left","autoClear","transform","appendChild","setSize","camera","root","factory","define","install","body","zenscroll","setTimeout","isNativeSmoothScrollEnabledOn","elem","makeScroller","defaultDuration","edgeOffset","scrollTimeoutId","setScrollTimeoutId","newValue","stopScroll","clearTimeout","getTopWithEdgeOffset","max","getTopOf","scrollToY","targetY","onDone","toY","startY","getY","distance","startTime","Date","getTime","min","abs","loopScroll","p","y","floor","getHeight","scrollHeight","scrollToElem","scrollIntoView","elemHeight","elemBottom","containerHeight","containerBottom","scrollToCenterOf","offset","setup","newDefaultDuration","newEdgeOffset","intoView","center","stop","moving","docElem","getDocY","scrollTop","scrollingElement","scrollTo","clientHeight","offsetTop","createScroller","scrollContainer","noZensmooth","isScrollRestorationSupported","history","scrollRestoration","event","state","zenscrollY","location","hash","targetElem","getElementById","href","diff","RE_noZensmooth","RegExp","anchor","tagName","parentNode","which","shiftKey","metaKey","ctrlKey","altKey","replaceState","getAttribute","test","className","substring","pushState"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 28aa9d84d0bf294f547b","import App from './app.js';\n\nfunction init() {\n  window.app = new App();\n}\n\nwindow.onload = function() {\n  init();\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","'use strict';\n\n// import Config from './config';\n// import DesktopFallback from './desktopFallback';\nimport bus from './bus';\nimport RendererGL from './rendererGL';\n// import RendererCSS from './rendererCSS';\n// import Inputs from './inputs';\n// import DomWrapper from './domWrapper';\n// import Environments from './environments';\n// import { getCameraPosition, getCameraOrientation } from './utilities';\nimport zenscroll from 'zenscroll'\n\nexport default class App {\n  constructor() {\n\n    this.activeCamera;\n    this.arCamera;\n    this.arView;\n    this.container;\n    // this.cssCamera;\n    this.currentMode;\n    this.deviceType;\n    this.ENTER_EXIT_TRANSITION_DURATION = 800;\n    this.hemisphereLight;\n    this.LIGHTING_INTENSITY_FOR_AR = 1.8;\n    this.LIGHTING_INTENSITY_FOR_MOBILE_AND_DESKTOP = 1.3;\n    this.model;\n    this.orbitControls;\n    this.PERSP_CAMERA_FOV = 15;\n    this.PERSP_CAMERA_ISO_TARGET = new THREE.Vector3(0, 1, 0);\n    this.perspCamera;\n    this.render = this.render.bind(this);\n    this.scrollOffset;\n    this.scrollTarget;\n    this.viewer;\n    this.viewerOffsetFromTop;\n    this.viewerPlaceholder;\n    this.vrControls;\n    this.vrDisplay;\n    this.vrFrameData;\n    \n    // Global Draco decoder type.\n    this.dracoDecoderType = {};\n    this.dracoDecoderType.type = 'js';\n    this.dracoLoader = new THREE.DRACOLoader('js/third_party/draco/', this.dracoDecoderType);\n\n    // Check for AR displays\n    THREE.ARUtils.getARDisplay().then(display => {\n      this.vrDisplay = display;\n      this.init();\n    });\n  }\n\n  init() {\n\n    this.currentMode = 'default';\n    this.createScene();\n\n    if (this.isARDevice()) {\n      this.setDeviceType(\"ar\");\n      this.createArCameras();\n      // this.showElement(document.querySelector(\"#enter-ar\"));\n\n    } else if (this.isMobileDevice()) {\n      this.setDeviceType(\"mobile\");\n      this.createMobileCamera();\n      // this.hideElement(document.querySelector(\"#enter-ar\"));\n\n    } else {\n      this.setDeviceType(\"desktop\");\n      this.createDesktopCamera();\n      // this.hideElement(document.querySelector(\"#enter-ar\"));\n    }\n\n    this.createModel();\n    this.createLights();\n    // this.createEnvironments();\n    this.setActiveCamera(this.perspCamera);\n    this.render();\n  }\n\n  createScene() {\n\n    // Create container elements\n    this.container = document.querySelector(\"#container\");\n    this.viewer = document.querySelector(\"#viewer\");\n    this.splash = document.querySelector(\"#splash\");\n    \n    // Setup scene and renderers\n    this.scene = new THREE.Scene();\n    this.rendererGL = new RendererGL(this.container);\n    // this.rendererCSS = new RendererCSS(this.container);\n\n    // Set `pointer-events` to none so we can appropriately receive events.\n    // this.rendererGL.renderer.domElement.style.pointerEvents = 'auto';\n    // this.rendererCSS.renderer.domElement.style.pointerEvents = 'none';\n    this.rendererGL.renderer.domElement.addEventListener('click', () =>\n      this.onCanvasClick(), true);\n\n    // Create scene root group\n    // this.group = new THREE.Group();\n    // this.scene.add(this.group);\n\n    // Setup CSS root element\n    // this.cssRoot = new THREE.Object3D();\n    // this.cssRoot.scale.set(0.001, 0.001, 0.001); \n    // this.scene.add(this.cssRoot);\n\n    // this.cssTest = new THREE.CSS3DObject(document.querySelector(\"#css-test\"));\n    // this.logo.scale.set(0.001, 0.001, 0.001);\n    // this.cssTest.position.set(0, 0, 0);\n    // this.cssRoot.add(this.cssTest)\n    \n    // Setup buttons\n    \n    this.enterButton = document.querySelector('#enterButton');\n    this.enterButton.addEventListener('click', () => this.enter());\n    \n    this.exitButton = document.querySelector('#exitButton');\n    this.exitButton.addEventListener('click', () => this.exit());\n\n    // window.addEventListener('resize', e => this.onWindowResize(e), false);\n    document.addEventListener('touchmove', e => this.onTouchMove(e), { passive: false });\n    // bus.on('enterAR', () => this.enterAR());\n    // bus.on('exitAR', () => this.exit());\n\n  }\n\n  setDeviceType(type) {\n    this.deviceType = type;\n    console.log(this.deviceType);\n  }\n\n  isARDevice() {\n    if (this.vrDisplay) return true;\n  }\n\n  isMobileDevice() {\n    // Taken from https://coderwall.com/p/i817wa/one-line-function-to-detect-mobile-devices-with-javascript\n    return (typeof window.orientation !== \"undefined\") || (navigator.userAgent.indexOf('IEMobile') !== -1);\n  };\n\n  hideElement(element) {\n    element.classList.add(\"hidden\");\n  };\n\n  showElement(element) {\n    element.classList.remove(\"hidden\");\n  };\n\n  getContainerSize() {\n\n    let w = window.getComputedStyle(this.container).getPropertyValue('width').split(\"px\")[0];\n    let h = window.getComputedStyle(this.container).getPropertyValue('height').split(\"px\")[0];\n\n    return {\n      width: w,\n      height: h\n    }\n  }\n\n  setActiveCamera(cam) {\n    this.activeCamera = cam;\n  }\n\n  updateCameraAndCanvas(duration = 800) {\n\n    new TWEEN.Tween({placeholder: 0})\n      .to({placeholder: 0}, duration)\n      .onUpdate(() => {\n        this.rendererGL.updateSize();\n        this.perspCamera.aspect = this.getContainerSize().width / this.getContainerSize().height;\n        this.perspCamera.updateProjectionMatrix();\n      })\n      .start();\n  }\n\n  createArCameras() {\n      \n    this.vrFrameData = new VRFrameData();\n\n    this.arCamera = new THREE.ARPerspectiveCamera(\n      this.vrDisplay,\n      60,\n      window.innerWidth / window.innerHeight,\n      this.vrDisplay.depthNear,\n      this.vrDisplay.depthFar\n    );\n\n    this.perspCamera = new THREE.PerspectiveCamera(this.PERSP_CAMERA_FOV - 5, window.innerWidth / window.innerHeight, this.vrDisplay.depthNear, this.vrDisplay.depthFar);\n    this.perspCamera.position.set(12, 12, 12);\n    this.perspCamera.lookAt(this.PERSP_CAMERA_ISO_TARGET);\n\n    window.addEventListener('resize', () => {\n      this.updateCameraAndCanvas(0);\n    });\n\n    this.updateCameraAndCanvas(0);\n\n    // this.cssCamera = new THREE.PerspectiveCamera(this.PERSP_CAMERA_FOV, window.innerWidth / window.innerHeight, this.vrDisplay.depthNear, this.vrDisplay.depthFar);\n\n    this.vrControls = new THREE.VRControls(this.arCamera);\n    this.arView = new THREE.ARView(this.vrDisplay, this.rendererGL.renderer);\n\n    // Turn on the debugging panel\n    // let arDebug = new THREE.ARDebug(this.vrDisplay, this.scene, { showPlanes: false });\n    // this.container.appendChild(arDebug.getElement());\n\n    // Create and add reticle\n    this.reticle = new ARPrimitives.ARSpotlight(this.vrDisplay);\n    this.scene.add(this.reticle);\n  }\n\n  createMobileCamera() {\n\n    this.perspCamera = new THREE.PerspectiveCamera(this.PERSP_CAMERA_FOV, this.getContainerSize().width / this.getContainerSize().height, 0.1, 100);\n    this.perspCamera.position.set(12, 12, 12);\n    this.perspCamera.lookAt(this.PERSP_CAMERA_ISO_TARGET);\n\n    window.addEventListener('resize', () => {\n      this.updateCameraAndCanvas(0);\n    });\n  }\n\n  createDesktopCamera(){\n\n    this.perspCamera = new THREE.PerspectiveCamera(this.PERSP_CAMERA_FOV, this.getContainerSize().width / this.getContainerSize().height, 0.1, 100);\n    this.perspCamera.position.set(12, 12, 12);\n    this.orbitControls = new THREE.OrbitControls( this.perspCamera, this.rendererGL.renderer.domElement );\n    // Enable animation loop when using damping or autorotation\n    this.orbitControls.autoRotate = true;\n    this.orbitControls.autoRotateSpeed = 2.0;\n    // this.orbitControls.enableDamping = true;\n    // this.orbitControls.dampingFactor = 0.25;\n    this.orbitControls.target = this.PERSP_CAMERA_ISO_TARGET;\n    this.orbitControls.enableZoom = false;\n    // this.orbitControls.minDistance = 20;\n    // this.orbitControls.maxDistance = 36;\n    this.orbitControls.minPolarAngle = 0; // radians\n    this.orbitControls.maxPolarAngle = Math.PI / 2; // radians\n    this.perspCamera.lookAt(this.PERSP_CAMERA_ISO_TARGET);\n    this.container.style.cursor = '-webkit-grab';\n\n    window.addEventListener('resize', () => {\n      this.updateCameraAndCanvas(0);\n    });\n  }\n\n  createModel() {\n    \n    /*\n    this.dracoLoader.load( 'models/sphere.drc', geometry => {\n\n      let mtlLoader = new THREE.MTLLoader();\n      mtlLoader.load('models/sphere.mtl', materials => {\n\n        console.log(\"Test\");\n        materials.preload();\n        // console.log(materials);\n        let mat = materials.materials.test;\n        console.log(mat);\n        // // this.loadModel(mat);\n\n        this.createGrid();\n        geometry.computeVertexNormals();\n\n        let material = new THREE.MeshNormalMaterial();\n        let mesh = new THREE.Mesh( geometry, mat );\n        mesh.geometry.applyMatrix( new THREE.Matrix4().makeScale(0.0001, 0.0001, 0.0001) );\n        // mesh.castShadow = true;\n        // mesh.receiveShadow = true;\n        \n        mesh.traverse(node => {\n          if( node.material ) {\n            node.material.side = THREE.DoubleSide;\n          }\n        })\n\n        console.log(mesh);\n\n        this.model = mesh;\n        this.scene.add( this.model );\n        // this.model.scale.set(0.1, 0.1, 0.1);\n\n      });\n    });\n    */\n\n    this.loadingManager = new THREE.LoadingManager();\n    this.loader = new THREE.ColladaLoader( this.loadingManager );\n    this.loader.load('models/jeep.dae', function(collada){\n\n      this.createGrid();\n\n      // Set all materials to DoubleSide, to compensate for flipped normals in the original model\n      collada.scene.traverse( function( node ) {\n        // console.log(node.name);\n        if( node.material ) {\n          node.material.side = THREE.DoubleSide;\n        }\n      });\n\n      this.model = collada.scene;\n      this.scene.add(this.model)\n      let wheels_left = this.model.getObjectByName(\"wheels-right\");\n      wheels_left.position.set(0, 0, 200);\n      new TWEEN.Tween(this.model.getObjectByName(\"wheels-right\").position)\n      .to({z: 0 }, 1000)\n      .easing(TWEEN.Easing.Quadratic.Out)\n      .start()\n\n      // Fire pageLoad once model is ready\n      // bus.emit('pageLoad');\n\n    }.bind(this));\n  }\n\n  createLights() {\n    this.hemisphereLight = new THREE.HemisphereLight( 0xF5F5F5, 0x1F1F1F, this.LIGHTING_INTENSITY_FOR_MOBILE_AND_DESKTOP );\n    this.scene.add( this.hemisphereLight );\n  }\n\n  createGrid() {\n    const GRID_SIZE = 5;\n    const GRID_DIVISIONS = 10;\n    const MEDIUM = 0xBABABA;\n    this.grid = new THREE.GridHelper(GRID_SIZE, GRID_DIVISIONS, MEDIUM, MEDIUM);\n    this.scene.add(this.grid);\n  }\n\n  createEnvironments() {\n    this.environments = new Environments(this.scene);\n  }\n\n  showModel() {\n    // new TWEEN.Tween(this.model.material)\n    //   .to({ opacity: 1 }, 1000)\n    //   .start();\n    this.model.visible = true;\n  }\n\n  hideModel() {\n    // new TWEEN.Tween(this.model.material)\n    //   .to({ opacity: 0 }, 1000)\n    //   .start();\n    this.model.visible = false;\n  }\n\n  enter() {\n    if (this.deviceType === 'ar') {\n      this.enterAR();\n    } else if (this.deviceType === 'mobile' || this.deviceType === 'desktop') {\n      this.enterFullscreen();\n    }\n  }\n\n  exit() {\n    if (this.currentMode === 'ar') {\n      this.exitAR();\n    } else if (this.currentMode === 'fullscreen') {\n      this.exitFullscreen();\n    }\n  }\n\n  enterFullscreen() {\n\n    this.exitButton.classList.remove(\"hidden\");\n    this.currentMode = 'fullscreen';\n\n    // We store this for later\n    this.viewerOffsetFromTop = this.viewer.getBoundingClientRect().top + window.scrollY;\n\n    // Create placeholder element. This will keep page from reflowing when we \"pop out\" the viewer by setting it's position to absolute\n    this.viewerPlaceholder = document.createElement('div');\n    this.viewerPlaceholder.id = 'placeholder';\n    this.viewerPlaceholder.style.width = window.getComputedStyle(this.viewer).getPropertyValue('width');\n    this.viewerPlaceholder.style.height = window.getComputedStyle(this.viewer).getPropertyValue('height');\n    this.viewerPlaceholder.style.padding = window.getComputedStyle(this.viewer).getPropertyValue('padding');\n    this.viewerPlaceholder.style.boxSizing = window.getComputedStyle(this.viewer).getPropertyValue('box-sizing');\n    this.viewer.parentElement.insertBefore( this.viewerPlaceholder, this.viewer );\n \n    // Prevent page scrolling by setting overflow and hidden values on documentElement\n    document.documentElement.style.overflowY = 'hidden';\n    document.documentElement.style.height = '100vh';\n\n    // Setting these three values \"pops\" the viewer out of the page flow without the user noticing.\n    // The key is setting \"top\" value to equal the viewer's Y position relative to viewport top, then setting position absolute.\n    this.viewer.style.position = 'absolute';\n\n    // Tweens the canvas and camera aspect ratio to match the new container size\n    this.updateCameraAndCanvas();\n\n    let transition = this.viewer.animate([\n      {top: String(this.viewerOffsetFromTop + 'px')},\n      {top: String(window.scrollY + 'px')}\n    ], {\n      duration: this.ENTER_EXIT_TRANSITION_DURATION,\n      easing: 'ease'\n    });\n\n    transition.addEventListener('finish', function() {\n      this.viewer.style.top = String(window.scrollY + 'px');\n    }.bind(this));\n\n    // The following classes animate the viewport and other elements into position\n    this.viewer.classList.add('fullscreen');\n    this.container.classList.add('fullscreen');\n    this.enterButton.classList.add('fullscreen');\n\n  }\n\n  exitFullscreen() {\n\n    this.exitButton.classList.add(\"hidden\");\n    this.currentMode = '2d';\n\n    // Re-enable page scrolling by removing height and overflow styles on document.documenElement\n    document.documentElement.removeAttribute('style');\n\n    let viewerCurrentPosition = window.getComputedStyle(this.viewer).getPropertyValue('top');\n\n    // Remove the following classes to animate the viewport and other elements back to their standard positions\n    this.viewer.classList.remove('fullscreen');\n    this.container.classList.remove('fullscreen');\n    this.enterButton.classList.remove('fullscreen');\n\n    // Tweens the canvas and camera aspect ratio to match the new container size\n    this.updateCameraAndCanvas();\n\n    let transition = this.viewer.animate([\n      {top: viewerCurrentPosition},\n      {top: String(this.viewerOffsetFromTop + 'px')}\n    ], {\n      duration: this.ENTER_EXIT_TRANSITION_DURATION,\n      easing: 'ease'\n    });\n\n    transition.addEventListener('finish', function() {\n      this.viewerPlaceholder.remove();\n      this.viewer.style.position = 'relative';\n      this.viewer.style.top = 0;\n      // this.viewer.removeAttribute('style');\n    }.bind(this));\n  }\n\n  enterAR() {\n\n    this.exitButton.classList.remove(\"hidden\");\n\n    // We store this for later\n    this.viewerOffsetFromTop = this.viewer.getBoundingClientRect().top + window.scrollY;\n\n    // Create placeholder element. This will keep page from reflowing when we \"pop out\" the viewer by setting it's position to absolute\n    this.viewerPlaceholder = document.createElement('div');\n    this.viewerPlaceholder.id = 'placeholder';\n    this.viewerPlaceholder.style.width = window.getComputedStyle(this.viewer).getPropertyValue('width');\n    this.viewerPlaceholder.style.height = window.getComputedStyle(this.viewer).getPropertyValue('height');\n    this.viewerPlaceholder.style.padding = window.getComputedStyle(this.viewer).getPropertyValue('padding');\n    this.viewerPlaceholder.style.boxSizing = window.getComputedStyle(this.viewer).getPropertyValue('box-sizing');\n    this.viewer.parentElement.insertBefore( this.viewerPlaceholder, this.viewer );\n\n\n \n    // Prevent page scrolling by setting overflow and hidden values on documentElement\n    document.documentElement.style.overflowY = 'hidden';\n    document.documentElement.style.height = '100vh';\n\n    // Setting these three values \"pops\" the viewer out of the page flow without the user noticing.\n    // The key is setting \"top\" value to equal the viewer's Y position relative to viewport top, then setting position absolute.\n    this.viewer.style.position = 'absolute';\n\n    // Tweens the canvas and camera aspect ratio to match the new container size\n    this.updateCameraAndCanvas();\n\n    let transition = this.viewer.animate([\n      {top: String(this.viewerOffsetFromTop + 'px')},\n      {top: String(window.scrollY + 'px')}\n    ], {\n      duration: this.ENTER_EXIT_TRANSITION_DURATION,\n      easing: 'ease'\n    });\n\n    transition.addEventListener('finish', function() {\n      this.viewer.style.top = String(window.scrollY + 'px');\n      this.currentMode = 'ar';\n      this.hideModel();\n      this.scene.add(this.reticle);\n      this.setActiveCamera(this.arCamera);\n      this.grid.visible = false;\n      this.hemisphereLight.intensity = this.LIGHTING_INTENSITY_FOR_AR;\n    }.bind(this));\n\n    // The following classes animate the viewport and other elements into position\n    this.splash.classList.add('fullscreen');\n    this.viewer.classList.add('fullscreen');\n    this.container.classList.add('fullscreen');\n    this.enterButton.classList.add('fullscreen');\n\n  }\n\n  exitAR() {\n\n    this.exitButton.classList.add(\"hidden\");\n    this.currentMode = '2d';\n\n    // Re-enable page scrolling by removing height and overflow styles on document.documenElement\n    document.documentElement.removeAttribute('style');\n\n    let viewerCurrentPosition = window.getComputedStyle(this.viewer).getPropertyValue('top');\n\n    // Remove the following classes to animate the viewport and other elements back to their standard positions\n    this.splash.classList.remove('fullscreen');\n    this.viewer.classList.remove('fullscreen');\n    this.container.classList.remove('fullscreen');\n    this.enterButton.classList.remove('fullscreen');\n\n    // Tween the canvas and camera aspect ratio to match the new container size\n    this.updateCameraAndCanvas();\n\n    let transition = this.viewer.animate([\n      {top: viewerCurrentPosition},\n      {top: String(this.viewerOffsetFromTop + 'px')}\n    ], {\n      duration: this.ENTER_EXIT_TRANSITION_DURATION,\n      easing: 'ease'\n    });\n\n    transition.addEventListener('finish', function() {\n      this.viewerPlaceholder.remove();\n      this.viewer.style.position = 'relative';\n      this.viewer.style.top = 0;\n    }.bind(this));\n\n    this.setActiveCamera(this.perspCamera);\n    this.showModel();\n    this.scene.remove(this.reticle);\n\n    // this.animatePerspCameraPosition({ x: 0, y: 1, z: 0 }, this.group.position);\n    // this.animatePerspCameraFov(this.PERSP_CAMERA_FOV);\n\n    // Tween group to 2D-mode position/rotation\n    // new TWEEN.Tween(this.group.position)\n    //   .to({x: 0, y: 0, z: -1}, 1000)\n    //   .easing(TWEEN.Easing.Quadratic.InOut)\n    //   .start();\n\n    // new TWEEN.Tween(this.group.rotation)\n    //   .to({x: 0, y: 45 * THREE.Math.DEG2RAD, z: 0}, 1000)\n    //   .easing(TWEEN.Easing.Quadratic.InOut)\n    //   .start();\n  }\n\n\n\n\n\n\n\n\n\n\n  onCanvasClick() {\n\n    if (this.vrDisplay && this.vrDisplay.hitTest && this.currentMode === 'ar') {\n      const hits = this.vrDisplay.hitTest(0.5, 0.5);\n      if (hits && hits.length) {\n        const hit = hits[0];\n        THREE.ARUtils.placeObjectAtHit(this.scene, hit, true, 1);\n        // Show model immediately if not already present\n        // this.model.material.opacity = 1;\n        this.showModel();\n      }\n    }\n  }\n\n  onTouchMove(e) {\n    if (this.currentMode === 'ar') {\n      e.preventDefault();\n    }\n  }\n\n  requestAnimationFrame(cb) {\n    return this.vrDisplay ? this.vrDisplay.requestAnimationFrame(cb) : requestAnimationFrame(cb);\n  } \n\n  render() {\n\n    TWEEN.update();\n\n    if (this.deviceType == 'ar') {\n      \n      if (this.currentMode == 'ar') {\n        this.arView.render();\n        this.reticle.update();\n        this.vrControls.update(); // Updates perspective camera's positioning\n      }\n      \n      // Update camera projection matrix in case near/far planes have changed\n      this.arCamera.updateProjectionMatrix();\n      // this.perspCamera.updateProjectionMatrix();\n      // this.cssCamera.updateProjectionMatrix();\n      this.arCamera.updateMatrix();\n      this.rendererGL.renderer.clearDepth();\n    }\n\n    else if (this.deviceType == 'mobile') {\n\n    }\n\n    else if (this.deviceType == 'desktop') {\n      this.orbitControls.update();\n    }\n    \n    this.perspCamera.updateMatrix();\n    this.rendererGL.render(this.scene, this.activeCamera);\n    // this.rendererCSS.render(this.scene, this.activeCamera);\n    this.requestAnimationFrame(this.render);\n\n  }\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n  /*======== OLD ========= */\n\n  // Not currently used, and can potentially be deleted\n\n  getCameraFov(cam) {\n    if (this.vrDisplay) {\n\n      // From the WebVR API, populate `vrFrameData` with\n      // updated information for the frame; only call this here when we\n      // need it as we only call this function when triggering transitions,\n      // rather than calling `getFrameData` on every frame\n      this.vrDisplay.getFrameData(this.vrFrameData);\n\n      // Magic math extracts three.js-compatible FOV from device camera projection matrix.\n      // Adapted from http://answers.unity3d.com/questions/770838/how-can-i-extract-the-fov-information-from-the-pro.html\n      let projMat = this.vrFrameData.leftProjectionMatrix[5];\n      let fov = Math.atan(1.0 / projMat ) * 2.0 * THREE.Math.RAD2DEG;\n      return fov;\n    } else {\n      return cam.fov;\n    }\n  }\n\n  animatePerspCameraPosition(pos, target, onComplete) {\n    new TWEEN.Tween(this.perspCamera.position)\n      .to(pos, 1000)\n      .onUpdate(() => target && this.perspCamera.lookAt(target))\n      .onComplete(() => {\n        if (typeof onComplete === 'function') onComplete();\n      })\n      .easing(TWEEN.Easing.Quadratic.InOut)\n      .start();\n  }\n\n  animatePerspCameraRotation(quat) {\n    new TWEEN.Tween(this.perspCamera.quaternion)\n      .to(quat, 1000)\n      .easing(TWEEN.Easing.Quadratic.InOut)\n      .start();\n  }\n\n  animatePerspCameraFov(fov) {\n    new TWEEN.Tween(this.perspCamera)\n      .to({ fov }, 1000)\n      .onUpdate(() => this.perspCamera.updateProjectionMatrix())\n      .easing(TWEEN.Easing.Quadratic.InOut)\n      .start();\n  }\n\n  // toggleMode() {\n  //   if (this.currentMode !== '2D') {\n  //     this.currentMode = '2D';\n  //     bus.emit('enterAR');\n  //   } else if (this.currentMode !== 'AR') {\n  //     this.currentMode = 'AR';\n  //     bus.emit('exitAR');\n  //   }\n  // }\n\n\n\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app.js","const EventEmitter = require('events').EventEmitter;\n\nexport default new EventEmitter();\n\n\n// WEBPACK FOOTER //\n// ./src/bus.js","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nfunction EventEmitter() {\n  this._events = this._events || {};\n  this._maxListeners = this._maxListeners || undefined;\n}\nmodule.exports = EventEmitter;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nEventEmitter.defaultMaxListeners = 10;\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function(n) {\n  if (!isNumber(n) || n < 0 || isNaN(n))\n    throw TypeError('n must be a positive number');\n  this._maxListeners = n;\n  return this;\n};\n\nEventEmitter.prototype.emit = function(type) {\n  var er, handler, len, args, i, listeners;\n\n  if (!this._events)\n    this._events = {};\n\n  // If there is no 'error' event listener then throw.\n  if (type === 'error') {\n    if (!this._events.error ||\n        (isObject(this._events.error) && !this._events.error.length)) {\n      er = arguments[1];\n      if (er instanceof Error) {\n        throw er; // Unhandled 'error' event\n      } else {\n        // At least give some kind of context to the user\n        var err = new Error('Uncaught, unspecified \"error\" event. (' + er + ')');\n        err.context = er;\n        throw err;\n      }\n    }\n  }\n\n  handler = this._events[type];\n\n  if (isUndefined(handler))\n    return false;\n\n  if (isFunction(handler)) {\n    switch (arguments.length) {\n      // fast cases\n      case 1:\n        handler.call(this);\n        break;\n      case 2:\n        handler.call(this, arguments[1]);\n        break;\n      case 3:\n        handler.call(this, arguments[1], arguments[2]);\n        break;\n      // slower\n      default:\n        args = Array.prototype.slice.call(arguments, 1);\n        handler.apply(this, args);\n    }\n  } else if (isObject(handler)) {\n    args = Array.prototype.slice.call(arguments, 1);\n    listeners = handler.slice();\n    len = listeners.length;\n    for (i = 0; i < len; i++)\n      listeners[i].apply(this, args);\n  }\n\n  return true;\n};\n\nEventEmitter.prototype.addListener = function(type, listener) {\n  var m;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events)\n    this._events = {};\n\n  // To avoid recursion in the case that type === \"newListener\"! Before\n  // adding it to the listeners, first emit \"newListener\".\n  if (this._events.newListener)\n    this.emit('newListener', type,\n              isFunction(listener.listener) ?\n              listener.listener : listener);\n\n  if (!this._events[type])\n    // Optimize the case of one listener. Don't need the extra array object.\n    this._events[type] = listener;\n  else if (isObject(this._events[type]))\n    // If we've already got an array, just append.\n    this._events[type].push(listener);\n  else\n    // Adding the second element, need to change to array.\n    this._events[type] = [this._events[type], listener];\n\n  // Check for listener leak\n  if (isObject(this._events[type]) && !this._events[type].warned) {\n    if (!isUndefined(this._maxListeners)) {\n      m = this._maxListeners;\n    } else {\n      m = EventEmitter.defaultMaxListeners;\n    }\n\n    if (m && m > 0 && this._events[type].length > m) {\n      this._events[type].warned = true;\n      console.error('(node) warning: possible EventEmitter memory ' +\n                    'leak detected. %d listeners added. ' +\n                    'Use emitter.setMaxListeners() to increase limit.',\n                    this._events[type].length);\n      if (typeof console.trace === 'function') {\n        // not supported in IE 10\n        console.trace();\n      }\n    }\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.once = function(type, listener) {\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  var fired = false;\n\n  function g() {\n    this.removeListener(type, g);\n\n    if (!fired) {\n      fired = true;\n      listener.apply(this, arguments);\n    }\n  }\n\n  g.listener = listener;\n  this.on(type, g);\n\n  return this;\n};\n\n// emits a 'removeListener' event iff the listener was removed\nEventEmitter.prototype.removeListener = function(type, listener) {\n  var list, position, length, i;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events || !this._events[type])\n    return this;\n\n  list = this._events[type];\n  length = list.length;\n  position = -1;\n\n  if (list === listener ||\n      (isFunction(list.listener) && list.listener === listener)) {\n    delete this._events[type];\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n\n  } else if (isObject(list)) {\n    for (i = length; i-- > 0;) {\n      if (list[i] === listener ||\n          (list[i].listener && list[i].listener === listener)) {\n        position = i;\n        break;\n      }\n    }\n\n    if (position < 0)\n      return this;\n\n    if (list.length === 1) {\n      list.length = 0;\n      delete this._events[type];\n    } else {\n      list.splice(position, 1);\n    }\n\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.removeAllListeners = function(type) {\n  var key, listeners;\n\n  if (!this._events)\n    return this;\n\n  // not listening for removeListener, no need to emit\n  if (!this._events.removeListener) {\n    if (arguments.length === 0)\n      this._events = {};\n    else if (this._events[type])\n      delete this._events[type];\n    return this;\n  }\n\n  // emit removeListener for all listeners on all events\n  if (arguments.length === 0) {\n    for (key in this._events) {\n      if (key === 'removeListener') continue;\n      this.removeAllListeners(key);\n    }\n    this.removeAllListeners('removeListener');\n    this._events = {};\n    return this;\n  }\n\n  listeners = this._events[type];\n\n  if (isFunction(listeners)) {\n    this.removeListener(type, listeners);\n  } else if (listeners) {\n    // LIFO order\n    while (listeners.length)\n      this.removeListener(type, listeners[listeners.length - 1]);\n  }\n  delete this._events[type];\n\n  return this;\n};\n\nEventEmitter.prototype.listeners = function(type) {\n  var ret;\n  if (!this._events || !this._events[type])\n    ret = [];\n  else if (isFunction(this._events[type]))\n    ret = [this._events[type]];\n  else\n    ret = this._events[type].slice();\n  return ret;\n};\n\nEventEmitter.prototype.listenerCount = function(type) {\n  if (this._events) {\n    var evlistener = this._events[type];\n\n    if (isFunction(evlistener))\n      return 1;\n    else if (evlistener)\n      return evlistener.length;\n  }\n  return 0;\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  return emitter.listenerCount(type);\n};\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\n\n\n\n// WEBPACK FOOTER //\n// (webpack)/node_modules/events/events.js","export default class RendererGL {\n  constructor(container) {\n    \n    this.container = container;\n    this.renderer = new THREE.WebGLRenderer({alpha: true});\n    this.renderer.setPixelRatio(window.devicePixelRatio);\n    this.updateSize();\n    this.renderer.domElement.style.position = 'absolute';\n    this.renderer.domElement.style.left = '50%';\n    this.renderer.domElement.style.top = '50%';\n    this.renderer.autoClear = false;\n    this.renderer.domElement.style.transform = 'translate(-50%, -50%)';\n    // this.renderer.domElement.style.border = '6px solid yellow';\n    // this.renderer.domElement.style.boxSizing = 'border-box';\n    // this.renderer.domElement.style.pointerEvents = 'none';\n    container.appendChild(this.renderer.domElement);\n\n    document.addEventListener('DOMContentLoaded', () => this.updateSize(), false);\n    window.addEventListener('resize', () => this.updateSize(), false);\n  }\n\n  updateSize() {\n\n    let w = window.getComputedStyle(this.container).getPropertyValue('width').split(\"px\")[0];\n    let h = window.getComputedStyle(this.container).getPropertyValue('height').split(\"px\")[0];\n    this.renderer.setSize(w, h);\n  }\n\n  render(scene, camera) {\n    this.renderer.render(scene, camera)\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/rendererGL.js","/**\n * Zenscroll 4.0.0\n * https://github.com/zengabor/zenscroll/\n *\n * Copyright 2015–2017 Gabor Lenard\n *\n * This is free and unencumbered software released into the public domain.\n * \n * Anyone is free to copy, modify, publish, use, compile, sell, or\n * distribute this software, either in source code form or as a compiled\n * binary, for any purpose, commercial or non-commercial, and by any\n * means.\n * \n * In jurisdictions that recognize copyright laws, the author or authors\n * of this software dedicate any and all copyright interest in the\n * software to the public domain. We make this dedication for the benefit\n * of the public at large and to the detriment of our heirs and\n * successors. We intend this dedication to be an overt act of\n * relinquishment in perpetuity of all present and future rights to this\n * software under copyright law.\n * \n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.\n * IN NO EVENT SHALL THE AUTHORS BE LIABLE FOR ANY CLAIM, DAMAGES OR\n * OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE,\n * ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR\n * OTHER DEALINGS IN THE SOFTWARE.\n * \n * For more information, please refer to <http://unlicense.org>\n * \n */\n\n/*jshint devel:true, asi:true */\n\n/*global define, module */\n\n\n(function (root, factory) {\n\tif (typeof define === \"function\" && define.amd) {\n\t\tdefine([], factory())\n\t} else if (typeof module === \"object\" && module.exports) {\n\t\tmodule.exports = factory()\n\t} else {\n\t\t(function install() {\n\t\t\t// To make sure Zenscroll can be referenced from the header, before `body` is available\n\t\t\tif (document && document.body) {\n\t\t\t\troot.zenscroll = factory()\n\t\t\t} else {\n\t\t\t\t// retry 9ms later\n\t\t\t\tsetTimeout(install, 9)\n\t\t\t}\n\t\t})()\n\t}\n}(this, function () {\n\t\"use strict\"\n\n\n\t// Detect if the browser already supports native smooth scrolling (e.g., Firefox 36+ and Chrome 49+) and it is enabled:\n\tvar isNativeSmoothScrollEnabledOn = function (elem) {\n\t\treturn (\"getComputedStyle\" in window) &&\n\t\t\twindow.getComputedStyle(elem)[\"scroll-behavior\"] === \"smooth\"\n\t}\n\n\n\t// Exit if it’s not a browser environment:\n\tif (typeof window === \"undefined\" || !(\"document\" in window)) {\n\t\treturn {}\n\t}\n\n\n\tvar makeScroller = function (container, defaultDuration, edgeOffset) {\n\n\t\t// Use defaults if not provided\n\t\tdefaultDuration = defaultDuration || 999 //ms\n\t\tif (!edgeOffset && edgeOffset !== 0) {\n\t\t\t// When scrolling, this amount of distance is kept from the edges of the container:\n\t\t\tedgeOffset = 9 //px\n\t\t}\n\n\t\t// Handling the life-cycle of the scroller\n\t\tvar scrollTimeoutId\n\t\tvar setScrollTimeoutId = function (newValue) {\n\t\t\tscrollTimeoutId = newValue\n\t\t}\n\n\t\t/**\n\t\t * Stop the current smooth scroll operation immediately\n\t\t */\n\t\tvar stopScroll = function () {\n\t\t\tclearTimeout(scrollTimeoutId)\n\t\t\tsetScrollTimeoutId(0)\n\t\t}\n\n\t\tvar getTopWithEdgeOffset = function (elem) {\n\t\t\treturn Math.max(0, container.getTopOf(elem) - edgeOffset)\n\t\t}\n\n\t\t/**\n\t\t * Scrolls to a specific vertical position in the document.\n\t\t *\n\t\t * @param {targetY} The vertical position within the document.\n\t\t * @param {duration} Optionally the duration of the scroll operation.\n\t\t *        If not provided the default duration is used.\n\t\t * @param {onDone} An optional callback function to be invoked once the scroll finished.\n\t\t */\n\t\tvar scrollToY = function (targetY, duration, onDone) {\n\t\t\tstopScroll()\n\t\t\tif (duration === 0 || (duration && duration < 0) || isNativeSmoothScrollEnabledOn(container.body)) {\n\t\t\t\tcontainer.toY(targetY)\n\t\t\t\tif (onDone) {\n\t\t\t\t\tonDone()\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tvar startY = container.getY()\n\t\t\t\tvar distance = Math.max(0, targetY) - startY\n\t\t\t\tvar startTime = new Date().getTime()\n\t\t\t\tduration = duration || Math.min(Math.abs(distance), defaultDuration);\n\t\t\t\t(function loopScroll() {\n\t\t\t\t\tsetScrollTimeoutId(setTimeout(function () {\n\t\t\t\t\t\t// Calculate percentage:\n\t\t\t\t\t\tvar p = Math.min(1, (new Date().getTime() - startTime) / duration)\n\t\t\t\t\t\t// Calculate the absolute vertical position:\n\t\t\t\t\t\tvar y = Math.max(0, Math.floor(startY + distance*(p < 0.5 ? 2*p*p : p*(4 - p*2)-1)))\n\t\t\t\t\t\tcontainer.toY(y)\n\t\t\t\t\t\tif (p < 1 && (container.getHeight() + y) < container.body.scrollHeight) {\n\t\t\t\t\t\t\tloopScroll()\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tsetTimeout(stopScroll, 99) // with cooldown time\n\t\t\t\t\t\t\tif (onDone) {\n\t\t\t\t\t\t\t\tonDone()\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}, 9))\n\t\t\t\t})()\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * Scrolls to the top of a specific element.\n\t\t *\n\t\t * @param {elem} The element to scroll to.\n\t\t * @param {duration} Optionally the duration of the scroll operation.\n\t\t * @param {onDone} An optional callback function to be invoked once the scroll finished.\n\t\t */\n\t\tvar scrollToElem = function (elem, duration, onDone) {\n\t\t\tscrollToY(getTopWithEdgeOffset(elem), duration, onDone)\n\t\t}\n\n\t\t/**\n\t\t * Scrolls an element into view if necessary.\n\t\t *\n\t\t * @param {elem} The element.\n\t\t * @param {duration} Optionally the duration of the scroll operation.\n\t\t * @param {onDone} An optional callback function to be invoked once the scroll finished.\n\t\t */\n\t\tvar scrollIntoView = function (elem, duration, onDone) {\n\t\t\tvar elemHeight = elem.getBoundingClientRect().height\n\t\t\tvar elemBottom = container.getTopOf(elem) + elemHeight\n\t\t\tvar containerHeight = container.getHeight()\n\t\t\tvar y = container.getY()\n\t\t\tvar containerBottom = y + containerHeight\n\t\t\tif (getTopWithEdgeOffset(elem) < y || (elemHeight + edgeOffset) > containerHeight) {\n\t\t\t\t// Element is clipped at top or is higher than screen.\n\t\t\t\tscrollToElem(elem, duration, onDone)\n\t\t\t} else if ((elemBottom + edgeOffset) > containerBottom) {\n\t\t\t\t// Element is clipped at the bottom.\n\t\t\t\tscrollToY(elemBottom - containerHeight + edgeOffset, duration, onDone)\n\t\t\t} else if (onDone) {\n\t\t\t\tonDone()\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * Scrolls to the center of an element.\n\t\t *\n\t\t * @param {elem} The element.\n\t\t * @param {duration} Optionally the duration of the scroll operation.\n\t\t * @param {offset} Optionally the offset of the top of the element from the center of the screen.\n\t\t * @param {onDone} An optional callback function to be invoked once the scroll finished.\n\t\t */\n\t\tvar scrollToCenterOf = function (elem, duration, offset, onDone) {\n\t\t\tscrollToY(Math.max(0, container.getTopOf(elem) - container.getHeight()/2 + (offset || elem.getBoundingClientRect().height/2)), duration, onDone)\n\t\t}\n\n\t\t/**\n\t\t * Changes default settings for this scroller.\n\t\t *\n\t\t * @param {newDefaultDuration} Optionally a new value for default duration, used for each scroll method by default.\n\t\t *        Ignored if null or undefined.\n\t\t * @param {newEdgeOffset} Optionally a new value for the edge offset, used by each scroll method by default. Ignored if null or undefined.\n\t\t * @returns An object with the current values.\n\t\t */\n\t\tvar setup = function (newDefaultDuration, newEdgeOffset) {\n\t\t\tif (newDefaultDuration === 0 || newDefaultDuration) {\n\t\t\t\tdefaultDuration = newDefaultDuration\n\t\t\t}\n\t\t\tif (newEdgeOffset === 0 || newEdgeOffset) {\n\t\t\t\tedgeOffset = newEdgeOffset\n\t\t\t}\n\t\t\treturn {\n\t\t\t\tdefaultDuration: defaultDuration,\n\t\t\t\tedgeOffset: edgeOffset\n\t\t\t}\n\t\t}\n\n\t\treturn {\n\t\t\tsetup: setup,\n\t\t\tto: scrollToElem,\n\t\t\ttoY: scrollToY,\n\t\t\tintoView: scrollIntoView,\n\t\t\tcenter: scrollToCenterOf,\n\t\t\tstop: stopScroll,\n\t\t\tmoving: function () { return !!scrollTimeoutId },\n\t\t\tgetY: container.getY,\n\t\t\tgetTopOf: container.getTopOf\n\t\t}\n\n\t}\n\n\n\tvar docElem = document.documentElement\n\tvar getDocY = function () { return window.scrollY || docElem.scrollTop }\n\n\t// Create a scroller for the document:\n\tvar zenscroll = makeScroller({\n\t\tbody: document.scrollingElement || document.body,\n\t\ttoY: function (y) { window.scrollTo(0, y) },\n\t\tgetY: getDocY,\n\t\tgetHeight: function () { return window.innerHeight || docElem.clientHeight },\n\t\tgetTopOf: function (elem) { return elem.getBoundingClientRect().top + getDocY() - docElem.offsetTop }\n\t})\n\n\n\t/**\n\t * Creates a scroller from the provided container element (e.g., a DIV)\n\t *\n\t * @param {scrollContainer} The vertical position within the document.\n\t * @param {defaultDuration} Optionally a value for default duration, used for each scroll method by default.\n\t *        Ignored if 0 or null or undefined.\n\t * @param {edgeOffset} Optionally a value for the edge offset, used by each scroll method by default. \n\t *        Ignored if null or undefined.\n\t * @returns A scroller object, similar to `zenscroll` but controlling the provided element.\n\t */\n\tzenscroll.createScroller = function (scrollContainer, defaultDuration, edgeOffset) {\n\t\treturn makeScroller({\n\t\t\tbody: scrollContainer,\n\t\t\ttoY: function (y) { scrollContainer.scrollTop = y },\n\t\t\tgetY: function () { return scrollContainer.scrollTop },\n\t\t\tgetHeight: function () { return Math.min(scrollContainer.clientHeight, window.innerHeight || docElem.clientHeight) },\n\t\t\tgetTopOf: function (elem) { return elem.offsetTop }\n\t\t}, defaultDuration, edgeOffset)\n\t}\n\n\n\t// Automatic link-smoothing on achors\n\t// Exclude IE8- or when native is enabled or Zenscroll auto- is disabled\n\tif (\"addEventListener\" in window && !window.noZensmooth && !isNativeSmoothScrollEnabledOn(document.body)) {\n\n\n\t\tvar isScrollRestorationSupported = \"scrollRestoration\" in history\n\n\t\t// On first load & refresh make sure the browser restores the position first\n\t\tif (isScrollRestorationSupported) {\n\t\t\thistory.scrollRestoration = \"auto\"\n\t\t}\n\n\t\twindow.addEventListener(\"load\", function () {\n\n\t\t\tif (isScrollRestorationSupported) {\n\t\t\t\t// Set it to manual\n\t\t\t\tsetTimeout(function () { history.scrollRestoration = \"manual\" }, 9)\n\t\t\t\twindow.addEventListener(\"popstate\", function (event) {\n\t\t\t\t\tif (event.state && \"zenscrollY\" in event.state) {\n\t\t\t\t\t\tzenscroll.toY(event.state.zenscrollY)\n\t\t\t\t\t}\n\t\t\t\t}, false)\n\t\t\t}\n\n\t\t\t// Add edge offset on first load if necessary\n\t\t\t// This may not work on IE (or older computer?) as it requires more timeout, around 100 ms\n\t\t\tif (window.location.hash) {\n\t\t\t\tsetTimeout(function () {\n\t\t\t\t\t// Adjustment is only needed if there is an edge offset:\n\t\t\t\t\tvar edgeOffset = zenscroll.setup().edgeOffset\n\t\t\t\t\tif (edgeOffset) {\n\t\t\t\t\t\tvar targetElem = document.getElementById(window.location.href.split(\"#\")[1])\n\t\t\t\t\t\tif (targetElem) {\n\t\t\t\t\t\t\tvar targetY = Math.max(0, zenscroll.getTopOf(targetElem) - edgeOffset)\n\t\t\t\t\t\t\tvar diff = zenscroll.getY() - targetY\n\t\t\t\t\t\t\t// Only do the adjustment if the browser is very close to the element:\n\t\t\t\t\t\t\tif (0 <= diff && diff < 9 ) {\n\t\t\t\t\t\t\t\twindow.scrollTo(0, targetY)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}, 9)\n\t\t\t}\n\n\t\t}, false)\n\n\t\t// Handling clicks on anchors\n\t\tvar RE_noZensmooth = new RegExp(\"(^|\\\\s)noZensmooth(\\\\s|$)\")\n\t\twindow.addEventListener(\"click\", function (event) {\n\t\t\tvar anchor = event.target\n\t\t\twhile (anchor && anchor.tagName !== \"A\") {\n\t\t\t\tanchor = anchor.parentNode\n\t\t\t}\n\t\t\t// Let the browser handle the click if it wasn't with the primary button, or with some modifier keys:\n\t\t\tif (!anchor || event.which !== 1 || event.shiftKey || event.metaKey || event.ctrlKey || event.altKey) {\n\t\t\t\treturn\n\t\t\t}\n\t\t\t// Save the current scrolling position so it can be used for scroll restoration:\n\t\t\tif (isScrollRestorationSupported) {\n\t\t\t\ttry {\n\t\t\t\t\thistory.replaceState({ zenscrollY: zenscroll.getY() }, \"\")\n\t\t\t\t} catch (e) {\n\t\t\t\t\t// Avoid the Chrome Security exception on file protocol, e.g., file://index.html\n\t\t\t\t}\n\t\t\t}\n\t\t\t// Find the referenced ID:\n\t\t\tvar href = anchor.getAttribute(\"href\") || \"\"\n\t\t\tif (href.indexOf(\"#\") === 0 && !RE_noZensmooth.test(anchor.className)) {\n\t\t\t\tvar targetY = 0\n\t\t\t\tvar targetElem = document.getElementById(href.substring(1))\n\t\t\t\tif (href !== \"#\") {\n\t\t\t\t\tif (!targetElem) {\n\t\t\t\t\t\t// Let the browser handle the click if the target ID is not found.\n\t\t\t\t\t\treturn\n\t\t\t\t\t}\n\t\t\t\t\ttargetY = zenscroll.getTopOf(targetElem)\n\t\t\t\t}\n\t\t\t\tevent.preventDefault()\n\t\t\t\t// By default trigger the browser's `hashchange` event...\n\t\t\t\tvar onDone = function () { window.location = href }\n\t\t\t\t// ...unless there is an edge offset specified\n\t\t\t\tvar edgeOffset = zenscroll.setup().edgeOffset\n\t\t\t\tif (edgeOffset) {\n\t\t\t\t\ttargetY = Math.max(0, targetY - edgeOffset)\n\t\t\t\t\tonDone = function () { history.pushState(null, \"\", href) }\n\t\t\t\t}\n\t\t\t\tzenscroll.toY(targetY, null, onDone)\n\t\t\t}\n\t\t}, false)\n\n\t}\n\n\n\treturn zenscroll\n\n\n}));\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/zenscroll/zenscroll.js"],"sourceRoot":""}